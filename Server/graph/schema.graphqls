# GraphQL schema example
# Document type
scalar UUID
scalar Time

# Verification status
enum Verification {
  ONBOARDING
  VERIFIED
  REJECTED
}

# Paid for
enum PaidFor {
  PAID
  NOT_PAID
}

# Payment status
enum PaymentStatus {
  success
  failed
  pending
  timeout
}

# PaymentReason
enum PaymentReason {
  LAND_REGISTRY
}

# Land
type Land {
  id: UUID!
  title: String!
  size: Int!
  symbol: String!
  town: String
  titleDocument: String!
  verified: Verification!
  created_at: Time!
  updated_at: Time!
}

# Title
type Title {
  id: UUID!
  title: String!
  verified: Verification!
  created_at: Time!
  updated_at: Time!
}

# SupportingDoc
type SupportingDoc {
  id: UUID!
  govt_id: String!
  verified: Verification!
  created_at: Time!
  updated_at: Time!
}

# User
type User {
  id: UUID!
  firstname: String
  lastname: String
  email: String!
  wallet_address: String!
  created_at: Time!
  updated_at: Time!
}

# Payment
type Payment {
  id: UUID!
  reference_id: String!
  status: String!
  title: Title
  title_id: UUID!
  wallet_address: String!
  created_at: Time!
  updated_at: Time!
}

# Payment update
type PaymentUpdate {
  referenceId: String!
  status: String!
  walletAddress: String!
}

input DocUploadInput {
  url: String!
  email: String!
  walletAddress: String!
}

input PayWithMpesaInput {
  reason: PaymentReason!
  phone: String!
  email: String!
  walletAddress: String!
  currency: String!
  paymentFor: UUID!
}

type Query {
  getLocalLands: [Land!]!
  getUserLands(walletAddress: String!): [Land!]!
  hasPendingLandRecords(walletAddress: String!): Boolean!
  getPaymentsByStatus(status: PaymentStatus!): [Payment!]!
}

type Mutation {
  uploadLandTitle(input: DocUploadInput!): Title!
  uploadSupportingDoc(input: DocUploadInput!): SupportingDoc!
  chargeMpesa(input: PayWithMpesaInput!): String
}

type Subscription {
  paymentUpdate(walletAddress: String!): PaymentUpdate!
}
